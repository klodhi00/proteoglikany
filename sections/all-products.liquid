{% comment %}
  Sekcja: Wszystkie produkty
  Wyświetla breadcrumbs, tag, tytuł oraz listę produktów w kartach
  Responsive: desktop (2 kolumny od 1024px), mobile (pionowo poniżej 1024px)
{% endcomment %}

<section class="all-products">
  <div class="all-products__outer-wrapper">
    <div class="all-products__inner-wrapper">
      
      {% comment %} Breadcrumbs - automatyczne {% endcomment %}
{% comment %} Breadcrumbs - automatyczne {% endcomment %}
<nav class="all-products__breadcrumbs" aria-label="Nawigacja okruszkowa">
  <ol class="all-products__breadcrumbs-list">
    <li class="all-products__breadcrumbs-item">
      <a href="/" class="all-products__breadcrumbs-link">Strona główna</a>
    </li>
    {%- if collection -%}
      <li class="all-products__breadcrumbs-item">
        <span class="all-products__breadcrumbs-separator">/</span>
        <a href="{{ collection.url }}" class="all-products__breadcrumbs-link">{{ collection.title }}</a>
      </li>
    {%- endif -%}
    <li class="all-products__breadcrumbs-item">
      <span class="all-products__breadcrumbs-separator">/</span>
      <span class="all-products__breadcrumbs-current">{{ page_title }}</span>
    </li>
  </ol>
</nav>

      {% comment %} Header z tagiem i tytułem {% endcomment %}
      <div class="all-products__header">
        {% if section.settings.tag_text != blank %}
          <span class="all-products__tag">{{ section.settings.tag_text }}</span>
        {% endif %}
        {% if section.settings.title != blank %}
          <h2 class="all-products__title">{{ section.settings.title }}</h2>
        {% endif %}
      </div>

      {% comment %} Lista produktów {% endcomment %}
      {% if section.blocks.size > 0 %}
        <div class="all-products__grid">
          {% for block in section.blocks %}
            <article 
              class="all-products__card" 
              {{ block.shopify_attributes }}
              {% if section.settings.card_background_image != blank %}
                style="background-image: url('{{ section.settings.card_background_image | image_url: width: 800 }}');"
              {% endif %}
            >
              <div class="all-products__card-inner">
                {% comment %} Zdjęcie produktu {% endcomment %}
                {% if block.settings.product_image != blank %}
                  <div class="all-products__card-image">
                    <img 
                      src="{{ block.settings.product_image | image_url: width: 400 }}"
                      srcset="{{ block.settings.product_image | image_url: width: 200 }} 200w,
                              {{ block.settings.product_image | image_url: width: 400 }} 400w,
                              {{ block.settings.product_image | image_url: width: 600 }} 600w"
                      sizes="(min-width: 1024px) 400px, 100vw"
                      alt="{{ block.settings.product_image.alt | escape }}"
                      loading="lazy"
                      width="{{ block.settings.product_image.width }}"
                      height="{{ block.settings.product_image.height }}"
                    >
                  </div>
                {% endif %}

                {% comment %} Treść produktu {% endcomment %}
                <div class="all-products__card-content">
                  {% if block.settings.product_title != blank %}
                    <h4 class="all-products__card-title">{{ block.settings.product_title }}</h4>
                  {% endif %}

                  {% if block.settings.product_description != blank %}
                    <p class="all-products__card-description">{{ block.settings.product_description }}</p>
                  {% endif %}

                  {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                    <a 
                      href="{{ block.settings.button_url }}" 
                      class="button button--outline all-products__card-button"
                      {% if block.settings.button_url contains 'http' %}
                        target="_blank" 
                        rel="noopener noreferrer"
                      {% endif %}
                    >
                      {{ block.settings.button_text }}
                    </a>
                  {% endif %}
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      {% endif %}

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Wszystkie produkty",
  "tag": "section",
  "class": "section-all-products",
  "settings": [
    {
      "type": "text",
      "id": "tag_text",
      "label": "Tag",
      "default": "PRODUKTY"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Tytuł sekcji",
      "default": "Wszystkie produkty"
    },
    {
      "type": "image_picker",
      "id": "card_background_image",
      "label": "Tło kart produktów"
    }
  ],
  "blocks": [
    {
      "type": "product_card",
      "name": "Karta produktu",
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Zdjęcie produktu"
        },
        {
          "type": "text",
          "id": "product_title",
          "label": "Tytuł produktu",
          "default": "Suplement diety Nourkrin Woman"
        },
        {
          "type": "textarea",
          "id": "product_description",
          "label": "Opis produktu",
          "default": "Nourkrin® Woman to naukowo opracowany suplement diety, który pomaga przywrócić i utrzymać prawidłowy cykl wzrostu włosów."
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Tekst przycisku",
          "default": "Zobacz produkt"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Link przycisku"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Wszystkie produkty",
      "blocks": [
        {
          "type": "product_card"
        },
        {
          "type": "product_card"
        }
      ]
    }
  ]
}
{% endschema %}